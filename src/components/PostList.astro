---
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import AboutMe from "./AboutMe.astro";

const posts = (await getCollection("blog")).sort(
  (a: any, b: any) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div class="flex flex-col md:flex-row items-start w-full px-4 md:px-80">
  <section
    class="flex flex-col items-start justify-start h-full w-full md:pr-12 md:px-6"
  >
    <h2 class="font-bold text-4xl mb-4">{t("articles:last")}</h2>
    <ul class="flex flex-col items-start gap-4 w-full">
      {
        posts.map((post: any) => (
          <a href={`/${post.slug}`} class="w-full">
            <li class="flex flex-col items-start w-full rounded-lg px-2 py-1 bg-theme-border/[.8] transition duration-300 hover:bg-theme-border cursor-pointer">
              <h4 class="mb-0 font-semibold text-2xl">{post.data.title}</h4>
              <p class="date mb-0 w-fit p-0">
                <FormattedDate date={post.data.pubDate} />
              </p>
            </li>
          </a>
        ))
      }
    </ul>
  </section>


  <AboutMe />
</div>
